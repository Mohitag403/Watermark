import asyncio
import importlib
from pyrogram import idle
from Downloader.modules import ALL_MODULES
from Downloader.modules.sudoers import mongodb
 

loop = asyncio.get_event_loop()


async def sumit_boot():
    for all_module in ALL_MODULES:
        importlib.import_module("Downloader.modules." + all_module)

    print("¬ª  ô·¥è·¥õ ·¥Ö·¥á·¥ò ü·¥è è s·¥ú·¥Ñ·¥Ñ·¥áss“ì·¥ú ü ü è ‚ú® üéâ")
    await idle()
    print("¬ª …¢·¥è·¥è·¥Ö  ô è·¥á ! s·¥õ·¥è·¥ò·¥ò…™…¥…¢  ô·¥è·¥õ.")

async def sudo():
    global SUDOERS
    SUDOERS.add(config.OWNER_ID)
    sudoersdb = mongodb.sudoers
    sudoers = await sudoersdb.find_one({"sudo": "sudo"})
    sudoers = [] if not sudoers else sudoers["sudoers"]
    if config.OWNER_ID not in sudoers:
        sudoers.append(config.OWNER_ID)
        await sudoersdb.update_one(
            {"sudo": "sudo"},
            {"$set": {"sudoers": sudoers}},
            upsert=True,
        )
    if sudoers:
        for user_id in sudoers:
            SUDOERS.add(user_id)

if __name__ == "__main__":
    loop.run_until_complete(sumit_boot())
